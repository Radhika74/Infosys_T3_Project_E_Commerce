{% extends "base.html" %}

{% block title %}
    View Products
{% endblock %}

{% block content %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/view_products.css') }}">

    <div class="container">
        <h2>Product List</h2>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>NAME</th>
                        <th>PRICE</th>
                        <th>PREV PRICE</th>
                        <th>DESCRIPTION</th>
                        <th>COLOR</th>
                        <th>RATING</th>
                        <th>CATEGORY</th>
                        <th>Size</th>
                        <th>Quantity</th>
                        <th>SALE</th>
                        <th>IMAGE</th>
                        <th colspan="2">ACTIONS</th>
                    </tr>
                </thead>
                <tbody>
                    {% for item in items %}
                        <tr>
                            <td>{{ item.id }}</td>
                            <td>{{ item.product_name }}</td>
                            <td>{{ item.current_price }}</td>
                            <td>{{ item.previous_price }}</td>
                            <td>{{ item.description }}</td>
                            <td>{{ item.color }}</td>
                            <td>{{ item.rating }}</td>
                            <td>{{ item.category }}</td>
                            <td colspan="2">
                                <table style="border: none; background: none; box-shadow: none;">
                                    {% for sizes in item.quantity_size %}
                                    <tr>
                                        <td style="width: 40px;border-collapse:none;box-shadow:none;border-bottom: none;">{{ sizes.size }}</td>
                                        <td style="width: 40px;border-collapse:none;box-shadow:none;border-bottom: none;">{{ sizes.quantity }}</td>
                                    </tr>
                                    {% endfor %}
                                </table>
                            </td>

                            <td>{{ item.sale }}</td>
                            <td>
                                <img src="{{ item.product_picture }}" alt="{{ item.product_name }} not loded" class="product-img">
                            </td>
                            <td>
                                <a href="{{ url_for('admin.update_item', product_id=item.id ) }}">
                                    <button class="btn btn-update">UPDATE</button>
                                </a>
                            </td>
                            <td>
                                <a href="{{ url_for('admin.delete_item', id=item.id ) }}">
                                    <button class="btn btn-delete" onclick="confirmDelete()">DELETE</button>
                                </a>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

    <script>
        function confirmDelete(url) {
            if (confirm("Are you sure you want to delete this product?")) {
                window.location.href = url;
            }
        }
    </script>
{% endblock %}